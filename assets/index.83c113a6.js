import{e as W,u as X,s as p,as as Y,_ as Z}from"./index.b3731552.js";/* empty css              *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as tt,r as A,o as et,w as ot,bP as at,bH as st,C as d,D as f,aI as t,aH as e,G as _,u as m,aK as y,aM as l,aN as r,aJ as x,aE as C,a_ as L,b9 as nt,bQ as it,bR as lt,bI as ut,bL as rt,be as dt,bf as ct}from"./arco.f43727df.js";import{f as pt}from"./vue.cbdb927d.js";import{R as mt,L as _t,a as ft,D as wt,T as gt,U as ht}from"./index.121828d4.js";import{P as bt,s as yt}from"./dep-6deb4e3a.9716590d.js";import{B as kt}from"./index.4efb2f62.js";import{L as Ft,F as vt,a as At}from"./index.9c5081a0.js";import{I as xt}from"./form-model.088c5f69.js";import"./chart.3c227ebb.js";import"./dialog.1f891b76.js";import"./index.7a815b78.js";import"./index.cf5b9908.js";const Ct=w=>(dt("data-v-686646c6"),w=w(),ct(),w),Lt={class:"container"},Et={style:{"margin-right":"20px"}},It={style:{display:"flex","align-items":"center","justify-content":"space-between"}},$t={style:{display:"flex",width:"100%"}},Bt={style:{width:"90%"}},Dt=Ct(()=>_("br",null,null,-1)),Ut={style:{width:"10%",margin:"auto","text-align":"center"}},Vt={name:"Backup"},Pt=tt({...Vt,setup(w){W();const u=X(),E=pt(),o=A({binaryFile:void 0,loading:!1,showPanel:!1,showUpload:!1,refLoading:!1,myList:[],total:0,page:1,nowpage:[]}),i=A({title:"",desc:"",firmware:[]});et(async()=>{const s=await p.get("https://k5.vicicode.com/wsapi/list?type=0&page="+o.page+"&t="+Date.now());o.total=s.total,o.nowpage=s.data}),ot(o,async(s,n)=>{if(s.page!=n.page){const h=await p.get("https://k5.vicicode.com/wsapi/list?type=0&page="+o.page+"&t="+Date.now());o.total=h.total,o.nowpage=h.data}});const g=async()=>{o.refLoading=!0,o.showPanel=!0;const s=await p.post("https://k5.vicicode.com/wsapi/my_list",{type:0,token:u.accountId});o.myList=s.data,o.refLoading=!1},I=()=>{i.title="",i.desc="",i.firmware=[],o.showUpload=!0},$=async()=>{if(i.title==""||i.firmware.length==0){L.error({content:"\u672A\u586B\u5199\u540D\u79F0\u53CA\u4E0A\u4F20\u6587\u4EF6",duration:5*1e3});return}await p.post("https://k5.vicicode.com/wsapi/upload",{type:0,token:u.accountId,title:i.title,desc:i.desc,data:i.firmware[0].url}),o.showUpload=!1,g()},B=async s=>{await p.post("https://k5.vicicode.com/wsapi/delete",{id:s,token:u.accountId}),g()},D=async s=>{await p.post("https://k5.vicicode.com/wsapi/star",{id:s}),L.success({content:"\u70B9\u8D5E\u6210\u529F",duration:5*1e3})},U=()=>{g()},V=s=>{E.push({path:"/tool/flash",query:{url:s}})};return(s,n)=>{const h=Y,c=nt,P=it,S=lt,R=at,N=bt,T=st,z=ut,M=rt,k=kt,H=yt,j=Ft,q=_t,G=ft,F=wt,J=xt,b=vt,K=gt,Q=ht,O=At;return d(),f("div",Lt,[t(h,{items:[s.$t("menu.workshop"),s.$t("menu.firmware")]},null,8,["items"]),t(M,{gutter:20,align:"stretch"},{default:e(()=>[t(z,{span:24},{default:e(()=>[t(T,{class:"general-card",title:s.$t("menu.firmware")},{extra:e(()=>[_("div",Et,[m(u).name?(d(),f(y,{key:0},[t(c,{onClick:g},{default:e(()=>[l("\xA0\xA0"+r(m(u).name)+"\xA0\xA0",1)]),_:1}),t(c,{onClick:n[0]||(n[0]=a=>m(u).logout())},{default:e(()=>[l("\xA0\xA0"+r(s.$t("global.logout"))+"\xA0\xA0",1)]),_:1})],64)):(d(),f(y,{key:1},[t(c,{onClick:n[1]||(n[1]=a=>m(u).setInfo({showLogin:!0}))},{default:e(()=>[l("\xA0\xA0"+r(s.$t("global.login"))+"\xA0\xA0",1)]),_:1}),t(c,{onClick:n[2]||(n[2]=a=>m(u).setInfo({showRegister:!0}))},{default:e(()=>[l("\xA0\xA0"+r(s.$t("global.register"))+"\xA0\xA0",1)]),_:1})],64))])]),default:e(()=>[t(R,null,{default:e(()=>[(d(!0),f(y,null,x(o.nowpage,a=>(d(),C(S,{style:{width:"100%"}},{actions:e(()=>[t(c,{onClick:v=>D(a.id)},{default:e(()=>[l("\u{1F44D}")]),_:2},1032,["onClick"]),t(c,{onClick:v=>V("https://k5.vicicode.com/wsapi/download?id="+a.id)},{default:e(()=>[l(r(s.$t("global.use")),1)]),_:2},1032,["onClick"])]),default:e(()=>[t(P,{title:a.title,description:a.desc},null,8,["title","description"])]),_:2},1024))),256))]),_:1}),t(N,{style:{margin:"10px"},total:o.total,current:o.page,showPageNumber:"",showPageSize:!1},null,8,["total","current"])]),_:1},8,["title"])]),_:1})]),_:1}),t(F,{visible:o.showPanel,"onUpdate:visible":n[3]||(n[3]=a=>o.showPanel=a),size:"50%",header:"\u6211\u7684\u56FA\u4EF6",footer:!1},{default:e(()=>[_("div",It,[t(k,{style:{margin:"10px"},onClick:I},{default:e(()=>[l("\u4E0A\u4F20\u65B0\u56FA\u4EF6")]),_:1}),t(k,{loading:o.refLoading,shape:"circle",theme:"outline",onClick:U},{icon:e(()=>[t(m(mt))]),_:1},8,["loading"])]),t(G,{split:!0},{default:e(()=>[(d(!0),f(y,null,x(o.myList,a=>(d(),C(q,null,{default:e(()=>[_("div",$t,[_("div",Bt,[t(H,{theme:"primary",variant:"outline"},{default:e(()=>[l(r(a.audit?"\u5DF2\u5BA1\u6838":"\u5BA1\u6838\u4E2D"),1)]),_:2},1024),l(" "+r(a.title)+" ",1),Dt,l(" "+r(a.desc),1)]),_("div",Ut,[t(j,{theme:"primary",hover:"color",onClick:v=>B(a.id)},{default:e(()=>[l("\u5220\u9664")]),_:2},1032,["onClick"])])])]),_:2},1024))),256))]),_:1})]),_:1},8,["visible"]),t(F,{visible:o.showUpload,"onUpdate:visible":n[7]||(n[7]=a=>o.showUpload=a),size:"25%",header:"\u4E0A\u4F20\u65B0\u56FA\u4EF6",footer:!1},{default:e(()=>[t(O,{data:i,"reset-type":"initial",colon:"",onSubmit:$},{default:e(()=>[t(b,{label:"\u56FA\u4EF6\u540D\u79F0",name:"title","label-align":"top"},{default:e(()=>[t(J,{modelValue:i.title,"onUpdate:modelValue":n[4]||(n[4]=a=>i.title=a)},null,8,["modelValue"])]),_:1}),t(b,{label:"\u56FA\u4EF6\u63CF\u8FF0",name:"desc","label-align":"top"},{default:e(()=>[t(K,{autosize:{minRows:5,maxRows:10},modelValue:i.desc,"onUpdate:modelValue":n[5]||(n[5]=a=>i.desc=a),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),t(b,{label:"\u56FA\u4EF6\u6587\u4EF6",name:"firmware","label-align":"top"},{default:e(()=>[t(Q,{modelValue:i.firmware,"onUpdate:modelValue":n[6]||(n[6]=a=>i.firmware=a),action:"https://k5.vicicode.com/wsapi/base64","abridge-name":[8,6],theme:"file-input",placeholder:"\u672A\u9009\u62E9\u6587\u4EF6"},null,8,["modelValue"])]),_:1}),t(b,{"label-align":"top"},{default:e(()=>[t(k,{theme:"primary",type:"submit",block:""},{default:e(()=>[l("\u63D0\u4EA4\u5BA1\u6838")]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])])}}});const ee=Z(Pt,[["__scopeId","data-v-686646c6"]]);export{ee as default};
