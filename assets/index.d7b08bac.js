import{s as X,u as Y,M as f,ac as Z,N as tt,_ as et}from"./index.1c489121.js";/* empty css              *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as ot,r as x,o as at,bQ as nt,bI as st,C as c,D as g,aI as t,aH as e,G as p,u as m,aK as b,aM as i,aN as r,aJ as C,aE as L,b7 as E,bh as lt,bR as it,bS as rt,bJ as ut,bL as dt,bm as ct,bn as pt}from"./arco.c29bba08.js";import{g as mt}from"./vue.437ba699.js";import{R as _t,L as ft,a as gt,D as wt,T as ht,U as bt}from"./index.6e5f452e.js";import{s as yt,P as At}from"./dep-6deb4e3a.3d55a83c.js";import{L as kt}from"./index.28526de4.js";import{I as vt}from"./index.2541b16e.js";import{F as Ft,a as xt}from"./index.190f67fb.js";import"./chart.34708d29.js";import"./slot.b1eeb75b.js";import"./index.17f1fd0b.js";import"./index.dc501ce9.js";import"./form-model.0a7b7414.js";const Ct=w=>(ct("data-v-ac0fde76"),w=w(),pt(),w),Lt={class:"container"},Et={style:{"margin-right":"20px"}},It={style:{color:"#373737",margin:"10px"}},$t={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ut={style:{display:"flex",width:"100%"}},Bt={style:{width:"90%"}},Dt=Ct(()=>p("br",null,null,-1)),St={style:{width:"10%",margin:"auto","text-align":"center"}},Vt={name:"Backup"},Pt=ot({...Vt,setup(w){X();const u=Y(),I=mt(),s=x({binaryFile:void 0,loading:!1,showPanel:!1,showUpload:!1,refLoading:!1,myList:[],total:0,page:1,nowpage:[]}),l=x({title:"",desc:"",firmware:[]});at(async()=>{A({current:1})});const A=async a=>{s.page=a.current;const n=await f.get("https://k5.vicicode.cn/wsapi/list?type=0&limit=12&page="+a.current+"&t="+Date.now());s.total=n.total,s.nowpage=n.data},_=async()=>{s.refLoading=!0,s.showPanel=!0;const a=await f.post("https://k5.vicicode.cn/wsapi/my_list",{type:0,token:u.accountId});s.myList=a.data,s.refLoading=!1},$=()=>{l.title="",l.desc="",l.firmware=[],s.showUpload=!0},U=async()=>{if(l.title==""||l.firmware.length==0){E.error({content:"\u672A\u586B\u5199\u540D\u79F0\u53CA\u4E0A\u4F20\u6587\u4EF6",duration:5*1e3});return}await f.post("https://k5.vicicode.cn/wsapi/upload",{type:0,token:u.accountId,title:l.title,desc:l.desc,data:l.firmware[0].url}),s.showUpload=!1,_()},B=async a=>{await f.post("https://k5.vicicode.cn/wsapi/delete",{id:a,token:u.accountId}),_()},D=async a=>{await f.post("https://k5.vicicode.cn/wsapi/star",{id:a}),E.success({content:"\u70B9\u8D5E\u6210\u529F",duration:5*1e3})},S=()=>{_()},V=a=>{I.push({path:"/tool/flash",query:{url:a}})};return(a,n)=>{const P=Z,d=lt,k=yt,R=it,N=rt,z=nt,M=At,T=st,J=ut,j=dt,y=tt,q=kt,G=ft,H=gt,v=wt,K=vt,h=Ft,Q=ht,O=bt,W=xt;return c(),g("div",Lt,[t(P,{items:[a.$t("menu.workshop"),a.$t("menu.firmware")]},null,8,["items"]),t(j,{gutter:20,align:"stretch"},{default:e(()=>[t(J,{span:24},{default:e(()=>[t(T,{class:"general-card",title:a.$t("menu.firmware")},{extra:e(()=>[p("div",Et,[m(u).name?(c(),g(b,{key:0},[t(d,{onClick:_},{default:e(()=>[i("\xA0\xA0"+r(m(u).name)+"\xA0\xA0",1)]),_:1}),t(d,{onClick:_},{default:e(()=>[i("\xA0\xA0"+r(a.$t("global.upload"))+"\xA0\xA0",1)]),_:1}),t(d,{onClick:n[0]||(n[0]=o=>m(u).logout())},{default:e(()=>[i("\xA0\xA0"+r(a.$t("global.logout"))+"\xA0\xA0",1)]),_:1})],64)):(c(),g(b,{key:1},[t(d,{onClick:n[1]||(n[1]=o=>m(u).setInfo({showLogin:!0}))},{default:e(()=>[i("\xA0\xA0"+r(a.$t("global.login"))+"\xA0\xA0",1)]),_:1}),t(d,{onClick:n[2]||(n[2]=o=>m(u).setInfo({showRegister:!0}))},{default:e(()=>[i("\xA0\xA0"+r(a.$t("global.register"))+"\xA0\xA0",1)]),_:1}),p("span",It,r(a.$t("global.loginUpload")),1)],64))])]),default:e(()=>[t(z,null,{default:e(()=>[(c(!0),g(b,null,C(s.nowpage,o=>(c(),L(N,{style:{width:"100%"}},{actions:e(()=>[t(d,{onClick:F=>D(o.id)},{default:e(()=>[i("\u{1F44D}")]),_:2},1032,["onClick"]),t(d,{onClick:F=>V("https://k5.vicicode.cn/wsapi/download?id="+o.id+"&n=/"+o.title)},{default:e(()=>[i(r(a.$t("global.use")),1)]),_:2},1032,["onClick"])]),default:e(()=>[t(R,{description:o.desc},{title:e(()=>[t(k,{theme:"primary",variant:"outline"},{default:e(()=>[i(r(o.upload),1)]),_:2},1024),i(" "+r(o.title),1)]),_:2},1032,["description"])]),_:2},1024))),256))]),_:1}),t(M,{onChange:A,style:{margin:"10px"},total:s.total,current:s.page,pageSize:12,showPageNumber:"",showPageSize:!1},null,8,["total","current"])]),_:1},8,["title"])]),_:1})]),_:1}),t(v,{visible:s.showPanel,"onUpdate:visible":n[3]||(n[3]=o=>s.showPanel=o),size:"50%",header:"\u6211\u7684\u56FA\u4EF6",footer:!1},{default:e(()=>[p("div",$t,[t(y,{style:{margin:"10px"},onClick:$},{default:e(()=>[i("\u4E0A\u4F20\u65B0\u56FA\u4EF6")]),_:1}),t(y,{loading:s.refLoading,shape:"circle",theme:"outline",onClick:S},{icon:e(()=>[t(m(_t))]),_:1},8,["loading"])]),t(H,{split:!0},{default:e(()=>[(c(!0),g(b,null,C(s.myList,o=>(c(),L(G,null,{default:e(()=>[p("div",Ut,[p("div",Bt,[t(k,{theme:"primary",variant:"outline"},{default:e(()=>[i(r(o.audit?"\u5DF2\u5BA1\u6838":"\u5BA1\u6838\u4E2D"),1)]),_:2},1024),i(" "+r(o.title)+" ",1),Dt,i(" "+r(o.desc),1)]),p("div",St,[t(q,{theme:"primary",hover:"color",onClick:F=>B(o.id)},{default:e(()=>[i("\u5220\u9664")]),_:2},1032,["onClick"])])])]),_:2},1024))),256))]),_:1})]),_:1},8,["visible"]),t(v,{visible:s.showUpload,"onUpdate:visible":n[7]||(n[7]=o=>s.showUpload=o),size:"25%",header:"\u4E0A\u4F20\u65B0\u56FA\u4EF6",footer:!1},{default:e(()=>[t(W,{data:l,"reset-type":"initial",colon:"",onSubmit:U},{default:e(()=>[t(h,{label:"\u56FA\u4EF6\u540D\u79F0",name:"title","label-align":"top"},{default:e(()=>[t(K,{modelValue:l.title,"onUpdate:modelValue":n[4]||(n[4]=o=>l.title=o)},null,8,["modelValue"])]),_:1}),t(h,{label:"\u56FA\u4EF6\u63CF\u8FF0",name:"desc","label-align":"top"},{default:e(()=>[t(Q,{autosize:{minRows:5,maxRows:10},modelValue:l.desc,"onUpdate:modelValue":n[5]||(n[5]=o=>l.desc=o),clearable:""},null,8,["modelValue"])]),_:1}),t(h,{label:"\u56FA\u4EF6\u6587\u4EF6",name:"firmware","label-align":"top"},{default:e(()=>[t(O,{modelValue:l.firmware,"onUpdate:modelValue":n[6]||(n[6]=o=>l.firmware=o),action:"https://k5.vicicode.cn/wsapi/base64","abridge-name":[8,6],theme:"file-input",placeholder:"\u672A\u9009\u62E9\u6587\u4EF6"},null,8,["modelValue"])]),_:1}),t(h,{"label-align":"top"},{default:e(()=>[t(y,{theme:"primary",type:"submit",block:""},{default:e(()=>[i("\u63D0\u4EA4\u5BA1\u6838")]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])])}}});const ne=et(Pt,[["__scopeId","data-v-ac0fde76"]]);export{ne as default};
