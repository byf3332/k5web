import{e as h,ag as B,_ as g}from"./index.006cd607.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               */import{d as C,r as A,bH as k,C as v,D,aI as a,aH as o,G as E,aM as F,b7 as y,bi as x,bF as H,bI as R,bM as S,n as T}from"./arco.93f0afda.js";import{e as U,b as I,g as L}from"./serial.bad97c4e.js";import{C as M}from"./index.d0865e71.js";import"./chart.c383733a.js";import"./vue.ded74ca2.js";import"./index.f5d63095.js";const P={class:"container"},$=["innerHTML"],N={name:"Chi"},V=C({...N,setup(K){const s=h(),l=A({status:"\u70B9\u51FB\u5199\u5165\u6309\u94AE\u5199\u5165\u5B57\u5E93\u5230\u8BBE\u5907<br/><br/>",eepromType:"",showHide:0}),m=async(t=0,e)=>{var _;await U(s.connectPort);for(let u=t;u<e.length+t;u+=128)await I(s.connectPort,u,e.slice(u-t,u-t+128),128,(_=s.configuration)==null?void 0:_.uart),l.status=l.status+"\u5199\u5165\u8FDB\u5EA6\uFF1A"+((u-t)/e.length*100).toFixed(1)+"%<br/>",T(()=>{const r=document==null?void 0:document.getElementById("statusArea");r&&(r.scrollTop=r==null?void 0:r.scrollHeight)});l.status=l.status+"\u5199\u5165\u8FDB\u5EA6\uFF1A100.0%<br/>",await L(s.connectPort)},w=async(t=1)=>{var _,u,r,p,b;if(s.connectState!=!0){alert("\u8BF7\u5148\u8FDE\u63A5\u624B\u53F0\uFF01");return}if(((_=s.configuration)==null?void 0:_.uart)=="official"){alert("\u56FA\u4EF6\u7248\u672C\u4E0D\u5339\u914D");return}if(t==1&&((u=s.configuration)==null?void 0:u.charset)!="losehu"||t==1&&((r=s.configuration)==null?void 0:r.K)!=!0){alert("\u56FA\u4EF6\u7248\u672C\u4E0D\u5339\u914D");return}if(t==2&&((p=s.configuration)==null?void 0:p.charset)!="gb2312"){alert("\u56FA\u4EF6\u7248\u672C\u4E0D\u5339\u914D");return}l.status=l.status+"\u6B63\u5728\u4E0B\u8F7D\u5B57\u5E93...<br />";let e;if(t==1){e=await fetch("/old_font.bin");const c=e.body.getReader(),n=[];for(;;){const{done:i,value:f}=await c.read();if(i)break;n.push(...f)}const d=new Uint8Array(n);await m(8192,d);return}if(t==2){e=await fetch("/new_font_k.bin");const c=e.body.getReader(),n=[];for(;;){const{done:i,value:f}=await c.read();if(i)break;n.push(...f)}const d=new Uint8Array(n);await m(9344,d);return}if(t==3){e=await fetch("/new_font_h.bin");const c=e.body.getReader(),n=[];for(;;){const{done:i,value:f}=await c.read();if(i)break;n.push(...f)}const d=new Uint8Array(n);await m(9344,d);return}if(t==4){(b=s.configuration)!=null&&b.newpinyin?e=await fetch("/pinyin_plus.bin"):e=await fetch("/pinyin.bin");const c=e.body.getReader(),n=[];for(;;){const{done:i,value:f}=await c.read();if(i)break;n.push(...f)}const d=new Uint8Array(n);await m(131072,d);return}};return(t,e)=>{const _=B,u=y,r=M,p=x,b=H,c=k,n=R,d=S;return v(),D("div",P,[a(_,{items:["\u5C0F\u5DE5\u5177","\u5B57\u5E93\u5199\u5165"]}),a(d,{gutter:20,align:"stretch"},{default:o(()=>[a(n,{span:24},{default:o(()=>[a(c,{class:"general-card"},{title:o(()=>[E("span",{onClick:e[0]||(e[0]=()=>{l.showHide+=1})},"\u5B57\u5E93\u5199\u5165\uFF08\u624B\u53F0\u5E94\u5728\u5F00\u673A\u72B6\u6001\u4E0B\uFF09")]),default:o(()=>[a(p,null,{default:o(()=>[a(r,{bordered:""},{header:o(()=>[F(" 117 \u7248\u672C LOSEHU \u56FA\u4EF6\u5199\u5165 ")]),default:o(()=>[a(u,{onClick:e[1]||(e[1]=i=>w(1))},{default:o(()=>[F("\u5199\u5165 117 \u5B57\u5E93")]),_:1})]),_:1}),a(r,{bordered:""},{header:o(()=>[F(" LOSEHU H\u7248\u56FA\u4EF6\u9700\u540C\u65F6\u5199\u5165\u5B57\u5E93\u53CA\u7D22\u5F15\u8868\uFF0CK\u7248\u53EA\u9700\u5199\u5165\u5B57\u5E93\u3002 ")]),default:o(()=>[a(p,null,{default:o(()=>[a(u,{onClick:e[2]||(e[2]=i=>w(2))},{default:o(()=>[F("\u5199\u5165 118+ \u5B57\u5E93")]),_:1}),a(u,{onClick:e[3]||(e[3]=i=>w(4))},{default:o(()=>[F("\u5199\u5165\u62FC\u97F3\u68C0\u7D22\u8868")]),_:1})]),_:1})]),_:1})]),_:1}),a(b),E("div",{id:"statusArea",style:{height:"20em","background-color":"azure",color:"silver",overflow:"auto",padding:"20px"},innerHTML:l.status},null,8,$)]),_:1})]),_:1})]),_:1})])}}});const ee=g(V,[["__scopeId","data-v-926242e5"]]);export{ee as default};
