import{k as X,u as Y,B as _,ak as Z,_ as tt}from"./index.fbbc76d0.js";/* empty css              *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as et,r as F,o as ot,bQ as at,bH as nt,C as c,D as f,aI as t,aH as e,G as m,u as p,aK as b,aM as l,aN as r,aJ as B,aE as C,a_ as E,b9 as st,bR as it,bS as lt,bI as rt,bK as ut,be as ct,bf as dt}from"./arco.949c921a.js";import{g as pt}from"./vue.9f26a24d.js";import{R as mt,L as _t,a as ft,D as gt,T as wt,U as ht}from"./index.855f73a1.js";import{s as bt,P as yt}from"./dep-6deb4e3a.f5eb3fb4.js";import{B as kt}from"./index.4f849950.js";import{L as vt}from"./index.ae8682ec.js";import{I as At}from"./form-model.c06b7815.js";import{F as xt,a as Ft}from"./index.02d58e94.js";import"./chart.b6f2f6d9.js";import"./dialog.0d6de03c.js";import"./useConfig.64172b2b.js";import"./index.304d7cc6.js";import"./helper.9c1234ab.js";import"./slot.87355008.js";import"./index.4a54fee0.js";import"./index.a21bc268.js";import"./useDisabled.fe45ce43.js";const Bt=g=>(ct("data-v-8fc936f5"),g=g(),dt(),g),Ct={class:"container"},Et={style:{"margin-right":"20px"}},It={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Lt={style:{display:"flex",width:"100%"}},$t={style:{width:"90%"}},Ut=Bt(()=>m("br",null,null,-1)),Dt={style:{width:"10%",margin:"auto","text-align":"center"}},St={name:"Backup"},Vt=et({...St,setup(g){X();const u=Y(),I=pt(),n=F({binaryFile:void 0,loading:!1,showPanel:!1,showUpload:!1,refLoading:!1,myList:[],total:0,page:1,nowpage:[]}),i=F({title:"",desc:"",firmware:[]});ot(async()=>{k({current:1})});const k=async s=>{n.page=s.current;const a=await _.get("https://k5.vicicode.com/wsapi/list?type=2&limit=12&page="+s.current+"&t="+Date.now());n.total=a.total,n.nowpage=a.data},w=async()=>{n.refLoading=!0,n.showPanel=!0;const s=await _.post("https://k5.vicicode.com/wsapi/my_list",{type:2,token:u.accountId});n.myList=s.data,n.refLoading=!1},L=()=>{i.title="",i.desc="",i.firmware=[],n.showUpload=!0},$=async()=>{if(i.title==""||i.firmware.length==0){E.error({content:"\u672A\u586B\u5199\u540D\u79F0\u53CA\u4E0A\u4F20\u6587\u4EF6",duration:5*1e3});return}await _.post("https://k5.vicicode.com/wsapi/upload",{type:2,token:u.accountId,title:i.title,desc:i.desc,data:i.firmware[0].url}),n.showUpload=!1,w()},U=async s=>{await _.post("https://k5.vicicode.com/wsapi/delete",{id:s,token:u.accountId}),w()},D=async s=>{await _.post("https://k5.vicicode.com/wsapi/star",{id:s}),E.success({content:"\u70B9\u8D5E\u6210\u529F",duration:5*1e3})},S=()=>{w()},V=s=>{I.push({path:"/chirp/channel",query:{url:s}})};return(s,a)=>{const P=Z,d=st,v=bt,R=it,z=lt,N=at,T=yt,M=nt,H=rt,K=ut,y=kt,j=vt,q=_t,G=ft,A=gt,J=At,h=xt,Q=wt,O=ht,W=Ft;return c(),f("div",Ct,[t(P,{items:[s.$t("menu.workshop"),s.$t("menu.channel")]},null,8,["items"]),t(K,{gutter:20,align:"stretch"},{default:e(()=>[t(H,{span:24},{default:e(()=>[t(M,{class:"general-card",title:s.$t("menu.channel")},{extra:e(()=>[m("div",Et,[p(u).name?(c(),f(b,{key:0},[t(d,{onClick:w},{default:e(()=>[l("\xA0\xA0"+r(p(u).name)+"\xA0\xA0",1)]),_:1}),t(d,{onClick:a[0]||(a[0]=o=>p(u).logout())},{default:e(()=>[l("\xA0\xA0"+r(s.$t("global.logout"))+"\xA0\xA0",1)]),_:1})],64)):(c(),f(b,{key:1},[t(d,{onClick:a[1]||(a[1]=o=>p(u).setInfo({showLogin:!0}))},{default:e(()=>[l("\xA0\xA0"+r(s.$t("global.login"))+"\xA0\xA0",1)]),_:1}),t(d,{onClick:a[2]||(a[2]=o=>p(u).setInfo({showRegister:!0}))},{default:e(()=>[l("\xA0\xA0"+r(s.$t("global.register"))+"\xA0\xA0",1)]),_:1})],64))])]),default:e(()=>[t(N,null,{default:e(()=>[(c(!0),f(b,null,B(n.nowpage,o=>(c(),C(z,{style:{width:"100%"}},{actions:e(()=>[t(d,{onClick:x=>D(o.id)},{default:e(()=>[l("\u{1F44D}")]),_:2},1032,["onClick"]),t(d,{onClick:x=>V("https://k5.vicicode.com/wsapi/download?id="+o.id)},{default:e(()=>[l(r(s.$t("global.use")),1)]),_:2},1032,["onClick"])]),default:e(()=>[t(R,{description:o.desc},{title:e(()=>[t(v,{theme:"primary",variant:"outline"},{default:e(()=>[l(r(o.upload),1)]),_:2},1024),l(" "+r(o.title),1)]),_:2},1032,["description"])]),_:2},1024))),256))]),_:1}),t(T,{onChange:k,style:{margin:"10px"},total:n.total,current:n.page,pageSize:12,showPageNumber:"",showPageSize:!1},null,8,["total","current"])]),_:1},8,["title"])]),_:1})]),_:1}),t(A,{visible:n.showPanel,"onUpdate:visible":a[3]||(a[3]=o=>n.showPanel=o),size:"50%",header:"\u6211\u7684\u5206\u4EAB",footer:!1},{default:e(()=>[m("div",It,[t(y,{style:{margin:"10px"},onClick:L},{default:e(()=>[l("\u4E0A\u4F20\u65B0\u5206\u4EAB")]),_:1}),t(y,{loading:n.refLoading,shape:"circle",theme:"outline",onClick:S},{icon:e(()=>[t(p(mt))]),_:1},8,["loading"])]),t(G,{split:!0},{default:e(()=>[(c(!0),f(b,null,B(n.myList,o=>(c(),C(q,null,{default:e(()=>[m("div",Lt,[m("div",$t,[t(v,{theme:"primary",variant:"outline"},{default:e(()=>[l(r(o.audit?"\u5DF2\u5BA1\u6838":"\u5BA1\u6838\u4E2D"),1)]),_:2},1024),l(" "+r(o.title)+" ",1),Ut,l(" "+r(o.desc),1)]),m("div",Dt,[t(j,{theme:"primary",hover:"color",onClick:x=>U(o.id)},{default:e(()=>[l("\u5220\u9664")]),_:2},1032,["onClick"])])])]),_:2},1024))),256))]),_:1})]),_:1},8,["visible"]),t(A,{visible:n.showUpload,"onUpdate:visible":a[7]||(a[7]=o=>n.showUpload=o),size:"25%",header:"\u4E0A\u4F20\u65B0\u56FA\u4EF6",footer:!1},{default:e(()=>[t(W,{data:i,"reset-type":"initial",colon:"",onSubmit:$},{default:e(()=>[t(h,{label:"\u5206\u4EAB\u540D\u79F0",name:"title","label-align":"top"},{default:e(()=>[t(J,{modelValue:i.title,"onUpdate:modelValue":a[4]||(a[4]=o=>i.title=o)},null,8,["modelValue"])]),_:1}),t(h,{label:"\u5206\u4EAB\u63CF\u8FF0",name:"desc","label-align":"top"},{default:e(()=>[t(Q,{autosize:{minRows:5,maxRows:10},modelValue:i.desc,"onUpdate:modelValue":a[5]||(a[5]=o=>i.desc=o),clearable:""},null,8,["modelValue"])]),_:1}),t(h,{label:"\u4FE1\u9053\u6587\u4EF6",name:"firmware","label-align":"top"},{default:e(()=>[t(O,{modelValue:i.firmware,"onUpdate:modelValue":a[6]||(a[6]=o=>i.firmware=o),action:"https://k5.vicicode.com/wsapi/base64","abridge-name":[8,6],theme:"file-input",placeholder:"\u672A\u9009\u62E9\u6587\u4EF6"},null,8,["modelValue"])]),_:1}),t(h,{"label-align":"top"},{default:e(()=>[t(y,{theme:"primary",type:"submit",block:""},{default:e(()=>[l("\u63D0\u4EA4\u5BA1\u6838")]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])])}}});const re=tt(Vt,[["__scopeId","data-v-8fc936f5"]]);export{re as default};
